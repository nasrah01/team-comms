{"ast":null,"code":"import _defineProperty from\"C:/Users/nasra/OneDrive/Desktop/chat-app/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/nasra/OneDrive/Desktop/chat-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/nasra/OneDrive/Desktop/chat-app/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/nasra/OneDrive/Desktop/chat-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/nasra/OneDrive/Desktop/chat-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Cookies from'universal-cookie';import axios from'axios';import logo from'../assets/images/chat01.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var cookies=new Cookies();var initialState={fullName:'',username:'',email:'',password:'',confirmPassword:'',avatar:''};var Auth=function Auth(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isSignup=_useState2[0],setIsSignup=_useState2[1];var _useState3=useState(initialState),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];var formSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var username,password,email,avatar,URL,_yield$axios$post,_yield$axios$post$dat,token,userId,hashedPassword,fullName;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();username=form.username,password=form.password,email=form.email,avatar=form.avatar;URL='http://localhost:5000/auth';_context.next=5;return axios.post(\"\".concat(URL,\"/\").concat(isSignup?'signup':'login'),{username:username,fullName:form.fullName,password:password,email:email,avatar:avatar});case 5:_yield$axios$post=_context.sent;_yield$axios$post$dat=_yield$axios$post.data;token=_yield$axios$post$dat.token;userId=_yield$axios$post$dat.userId;hashedPassword=_yield$axios$post$dat.hashedPassword;fullName=_yield$axios$post$dat.fullName;cookies.set('token',token);cookies.set(\"username\",username);cookies.set(\"fullName\",fullName);cookies.set(\"userId\",userId);if(isSignup){cookies.set(\"email\",email);cookies.set(\"hashedPassword\",hashedPassword);cookies.set(\"avatar\");}window.location.reload();case 17:case\"end\":return _context.stop();}}},_callee);}));return function formSubmit(_x){return _ref.apply(this,arguments);};}();var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var switchMode=function switchMode(){setIsSignup(function(prevIsSignup){return!prevIsSignup;});};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{className:\"mx-auto h-12 w-auto\",src:logo,alt:\"business logo\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-6 text-center text-3xl font-extrabold text-gray-900\",children:\"Team Chat\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-center text-sm text-gray-600\",children:isSignup?\"Sign Up\":\"Sign In\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-8 space-y-6\",onSubmit:formSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-md shadow-sm -space-y-px\",children:[isSignup&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"sr-only\",htmlFor:\"fullName\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\",name:\"fullName\",type:\"text\",placeholder:\"Full Name\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{className:\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\",name:\"username\",type:\"text\",placeholder:\"Username\",onChange:handleChange,required:true})]}),isSignup&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatar\",children:\"Avatar\"}),/*#__PURE__*/_jsx(\"input\",{className:\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\",name:\"avatar\",type:\"text\",placeholder:\"Avatar URL\",onChange:handleChange,required:true})]}),isSignup&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\",name:\"email\",type:\"text\",placeholder:\"Email\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\",name:\"password\",type:\"password\",placeholder:\"Password\",onChange:handleChange,required:true})]}),isSignup&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\",name:\"confirmPassword\",type:\"password\",placeholder:\"Confirm Password\",onChange:handleChange,required:true})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{children:isSignup?\"Sign Up\":\"Sign In\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[isSignup?\"Already have an account?\":\"New user?\",/*#__PURE__*/_jsx(\"span\",{onClick:switchMode,children:isSignup?\"Sign In\":\"Sign Up\"})]})})]})});};export default Auth;","map":{"version":3,"sources":["C:/Users/nasra/OneDrive/Desktop/chat-app/client/src/components/Auth.jsx"],"names":["React","useState","Cookies","axios","logo","cookies","initialState","fullName","username","email","password","confirmPassword","avatar","Auth","isSignup","setIsSignup","form","setForm","formSubmit","e","preventDefault","URL","post","data","token","userId","hashedPassword","set","window","location","reload","handleChange","target","name","value","switchMode","prevIsSignup"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport Cookies from 'universal-cookie';\r\nimport axios from 'axios';\r\nimport logo from '../assets/images/chat01.png';\r\n\r\nconst cookies = new Cookies();\r\n\r\nconst initialState = {\r\n  fullName: '',\r\n  username: '',\r\n  email: '',\r\n  password: '',\r\n  confirmPassword: '',\r\n  avatar: ''\r\n\r\n}\r\n\r\nconst Auth = () => {\r\n  const [isSignup, setIsSignup] = useState(true);\r\n  const [form, setForm] = useState(initialState);\r\n\r\n  const formSubmit = async (e) => {\r\n\r\n    e.preventDefault();\r\n\r\n    const {username, password, email, avatar} = form;\r\n\r\n    const URL = 'http://localhost:5000/auth';\r\n\r\n    const { data: {token, userId, hashedPassword, fullName} } = await axios.post(`${URL}/${isSignup ? 'signup' : 'login'}`, {\r\n      username, fullName: form.fullName, password, email, avatar\r\n    });\r\n\r\n    cookies.set('token', token);\r\n    cookies.set(\"username\", username);\r\n    cookies.set(\"fullName\", fullName);\r\n    cookies.set(\"userId\", userId);\r\n\r\n    if(isSignup) {\r\n      cookies.set(\"email\", email);\r\n      cookies.set(\"hashedPassword\", hashedPassword);\r\n      cookies.set(\"avatar\");\r\n    }\r\n\r\n    window.location.reload();\r\n    \r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value});\r\n  }\r\n\r\n  const switchMode = () => {\r\n    setIsSignup((prevIsSignup) => !prevIsSignup)\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-md w-full space-y-8\">\r\n        <div>\r\n          <img className=\"mx-auto h-12 w-auto\" src={logo} alt=\"business logo\" />\r\n          <p className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\r\n            Team Chat\r\n          </p>\r\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n            {isSignup ? \"Sign Up\" : \"Sign In\"}\r\n          </p>\r\n        </div>\r\n        <form className=\"mt-8 space-y-6\" onSubmit={formSubmit}>\r\n          <div className=\"rounded-md shadow-sm -space-y-px\">\r\n            {isSignup && (\r\n              <div>\r\n                <label className=\"sr-only\" htmlFor=\"fullName\">\r\n                  Full Name\r\n                </label>\r\n                <input\r\n                  className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\r\n                  name=\"fullName\"\r\n                  type=\"text\"\r\n                  placeholder=\"Full Name\"\r\n                  onChange={handleChange}\r\n                  required\r\n                />\r\n              </div>\r\n            )}\r\n            <div>\r\n              <label htmlFor=\"username\">Username</label>\r\n              <input\r\n                className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\r\n                name=\"username\"\r\n                type=\"text\"\r\n                placeholder=\"Username\"\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </div>\r\n            {isSignup && (\r\n              <div>\r\n                <label htmlFor=\"avatar\">Avatar</label>\r\n                <input\r\n                  className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\r\n                  name=\"avatar\"\r\n                  type=\"text\"\r\n                  placeholder=\"Avatar URL\"\r\n                  onChange={handleChange}\r\n                  required\r\n                />\r\n              </div>\r\n            )}\r\n            {isSignup && (\r\n              <div>\r\n                <label htmlFor=\"email\">Email</label>\r\n                <input\r\n                  className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\r\n                  name=\"email\"\r\n                  type=\"text\"\r\n                  placeholder=\"Email\"\r\n                  onChange={handleChange}\r\n                  required\r\n                />\r\n              </div>\r\n            )}\r\n            <div>\r\n              <label htmlFor=\"password\">Password</label>\r\n              <input\r\n                className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\r\n                name=\"password\"\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </div>\r\n            {isSignup && (\r\n              <div>\r\n                <label htmlFor=\"confirmPassword\">Confirm Password</label>\r\n                <input\r\n                  className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\r\n                  name=\"confirmPassword\"\r\n                  type=\"password\"\r\n                  placeholder=\"Confirm Password\"\r\n                  onChange={handleChange}\r\n                  required\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div>\r\n            <button>{isSignup ? \"Sign Up\" : \"Sign In\"}</button>\r\n          </div>\r\n        </form>\r\n        <div>\r\n          <p>\r\n            {isSignup ? \"Already have an account?\" : \"New user?\"}\r\n            <span onClick={switchMode}>{isSignup ? \"Sign In\" : \"Sign Up\"}</span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Auth\r\n"]},"metadata":{},"sourceType":"module"}