{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nasra\\\\OneDrive\\\\Desktop\\\\chat-app\\\\client\\\\src\\\\components\\\\TeamMessageInput.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useContext, useState } from \"react\";\nimport { ImageDropzone } from \"react-file-utils\";\nimport { ChatAutoComplete, EmojiPicker, UploadsPreview, useChannelStateContext, useChatContext, useMessageInputContext } from \"stream-chat-react\";\nimport { TeamTypingIndicator } from \"../TeamTypingIndicator/TeamTypingIndicator\";\nimport { GiphyContext } from \"./ChannelInner\";\nimport { BoldIcon, CodeSnippet, ItalicsIcon, LightningBolt, SendButton, SmileyFace, StrikeThroughIcon } from \"../assets\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TeamMessageInput = props => {\n  _s();\n\n  const {\n    pinsOpen\n  } = props;\n  const {\n    giphyState,\n    setGiphyState\n  } = useContext(GiphyContext);\n  const {\n    acceptedFiles,\n    channel,\n    maxNumberOfFiles,\n    multipleUploads,\n    thread\n  } = useChannelStateContext();\n  const {\n    client\n  } = useChatContext();\n  const [boldState, setBoldState] = useState(false);\n  const [codeState, setCodeState] = useState(false);\n  const [italicState, setItalicState] = useState(false);\n  const [strikeThroughState, setStrikeThroughState] = useState(false);\n\n  const resetIconState = () => {\n    setBoldState(false);\n    setCodeState(false);\n    setItalicState(false);\n    setStrikeThroughState(false);\n  };\n\n  const getPlaceholder = () => {\n    if (channel.type === \"team\") {\n      return `#${channel.data.name || channel.data.id || \"random\"}`;\n    }\n\n    const members = Object.values(channel.state.members).filter(_ref => {\n      let {\n        user\n      } = _ref;\n      return user.id !== client.userID;\n    });\n\n    if (!members.length || members.length === 1) {\n      var _members$, _members$2;\n\n      return ((_members$ = members[0]) === null || _members$ === void 0 ? void 0 : _members$.user.name) || ((_members$2 = members[0]) === null || _members$2 === void 0 ? void 0 : _members$2.user.id) || \"Johnny Blaze\";\n    }\n\n    return \"the group\";\n  };\n\n  const messageInput = useMessageInputContext();\n  const onChange = useCallback(e => {\n    var _e$nativeEvent;\n\n    const {\n      value\n    } = e.target;\n    const deletePressed = ((_e$nativeEvent = e.nativeEvent) === null || _e$nativeEvent === void 0 ? void 0 : _e$nativeEvent.inputType) === \"deleteContentBackward\";\n\n    if (messageInput.text.length === 1 && deletePressed) {\n      setGiphyState(false);\n    }\n\n    if (!giphyState && messageInput.text.startsWith(\"/giphy\") && !messageInput.numberOfUploads) {\n      e.target.value = value.replace(\"/giphy\", \"\");\n      setGiphyState(true);\n    }\n\n    if (boldState) {\n      if (deletePressed) {\n        e.target.value = `${value.slice(0, value.length - 2)}**`;\n      } else {\n        e.target.value = `**${value.replace(/\\**/g, \"\")}**`;\n      }\n    } else if (codeState) {\n      if (deletePressed) {\n        e.target.value = `${value.slice(0, value.length - 1)}\\``;\n      } else {\n        e.target.value = `\\`${value.replace(/`/g, \"\")}\\``;\n      }\n    } else if (italicState) {\n      if (deletePressed) {\n        e.target.value = `${value.slice(0, value.length - 1)}*`;\n      } else {\n        e.target.value = `*${value.replace(/\\*/g, \"\")}*`;\n      }\n    } else if (strikeThroughState) {\n      if (deletePressed) {\n        e.target.value = `${value.slice(0, value.length - 2)}~~`;\n      } else {\n        e.target.value = `~~${value.replace(/~~/g, \"\")}~~`;\n      }\n    }\n\n    messageInput.handleChange(e);\n  }, [boldState, codeState, giphyState, italicState, messageInput, setGiphyState, strikeThroughState]);\n\n  const GiphyIcon = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"giphy-icon__wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(LightningBolt, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"giphy-icon__text\",\n      children: \"GIPHY\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `team-message-input__wrapper ${(!!thread || pinsOpen) && \"thread-open\"}`,\n    children: [/*#__PURE__*/_jsxDEV(ImageDropzone, {\n      accept: acceptedFiles,\n      handleFiles: messageInput.uploadNewFiles,\n      multiple: multipleUploads,\n      disabled: maxNumberOfFiles !== undefined && messageInput.numberOfUploads >= maxNumberOfFiles || giphyState,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"team-message-input__input\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"team-message-input__top\",\n          children: [giphyState && !messageInput.numberOfUploads && /*#__PURE__*/_jsxDEV(GiphyIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 61\n          }, this), /*#__PURE__*/_jsxDEV(UploadsPreview, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ChatAutoComplete, {\n            onChange: onChange,\n            placeholder: `Message ${getPlaceholder()}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"team-message-input__button\",\n            role: \"button\",\n            \"aria-roledescription\": \"button\",\n            onClick: messageInput.handleSubmit,\n            children: /*#__PURE__*/_jsxDEV(SendButton, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"team-message-input__bottom\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"team-message-input__icons\",\n            children: [/*#__PURE__*/_jsxDEV(SmileyFace, {\n              openEmojiPicker: messageInput.openEmojiPicker\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"icon-divider\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(BoldIcon, {\n              boldState,\n              resetIconState,\n              setBoldState\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ItalicsIcon, {\n              italicState,\n              resetIconState,\n              setItalicState\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(StrikeThroughIcon, {\n              resetIconState,\n              strikeThroughState,\n              setStrikeThroughState\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CodeSnippet, {\n              codeState,\n              resetIconState,\n              setCodeState\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TeamTypingIndicator, {\n      type: \"input\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EmojiPicker, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TeamMessageInput, \"f374wyIXlZNfoPOAbqpWvCxQxa8=\", false, function () {\n  return [useChannelStateContext, useChatContext, useMessageInputContext];\n});\n\n_c = TeamMessageInput;\n\nvar _c;\n\n$RefreshReg$(_c, \"TeamMessageInput\");","map":{"version":3,"sources":["C:/Users/nasra/OneDrive/Desktop/chat-app/client/src/components/TeamMessageInput.jsx"],"names":["React","useCallback","useContext","useState","ImageDropzone","ChatAutoComplete","EmojiPicker","UploadsPreview","useChannelStateContext","useChatContext","useMessageInputContext","TeamTypingIndicator","GiphyContext","BoldIcon","CodeSnippet","ItalicsIcon","LightningBolt","SendButton","SmileyFace","StrikeThroughIcon","TeamMessageInput","props","pinsOpen","giphyState","setGiphyState","acceptedFiles","channel","maxNumberOfFiles","multipleUploads","thread","client","boldState","setBoldState","codeState","setCodeState","italicState","setItalicState","strikeThroughState","setStrikeThroughState","resetIconState","getPlaceholder","type","data","name","id","members","Object","values","state","filter","user","userID","length","messageInput","onChange","e","value","target","deletePressed","nativeEvent","inputType","text","startsWith","numberOfUploads","replace","slice","handleChange","GiphyIcon","uploadNewFiles","undefined","handleSubmit","openEmojiPicker"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useState } from \"react\";\r\nimport { ImageDropzone } from \"react-file-utils\";\r\nimport {\r\n  ChatAutoComplete,\r\n  EmojiPicker,\r\n  UploadsPreview,\r\n  useChannelStateContext,\r\n  useChatContext,\r\n  useMessageInputContext,\r\n} from \"stream-chat-react\";\r\n\r\nimport { TeamTypingIndicator } from \"../TeamTypingIndicator/TeamTypingIndicator\";\r\n\r\nimport { GiphyContext } from \"./ChannelInner\";\r\n\r\nimport {\r\n  BoldIcon,\r\n  CodeSnippet,\r\n  ItalicsIcon,\r\n  LightningBolt,\r\n  SendButton,\r\n  SmileyFace,\r\n  StrikeThroughIcon,\r\n} from \"../assets\";\r\n\r\nexport const TeamMessageInput = (props) => {\r\n  const { pinsOpen } = props;\r\n\r\n  const { giphyState, setGiphyState } = useContext(GiphyContext);\r\n\r\n  const { acceptedFiles, channel, maxNumberOfFiles, multipleUploads, thread } =\r\n    useChannelStateContext();\r\n  const { client } = useChatContext();\r\n\r\n  const [boldState, setBoldState] = useState(false);\r\n  const [codeState, setCodeState] = useState(false);\r\n  const [italicState, setItalicState] = useState(false);\r\n  const [strikeThroughState, setStrikeThroughState] = useState(false);\r\n\r\n  const resetIconState = () => {\r\n    setBoldState(false);\r\n    setCodeState(false);\r\n    setItalicState(false);\r\n    setStrikeThroughState(false);\r\n  };\r\n\r\n  const getPlaceholder = () => {\r\n    if (channel.type === \"team\") {\r\n      return `#${channel.data.name || channel.data.id || \"random\"}`;\r\n    }\r\n\r\n    const members = Object.values(channel.state.members).filter(\r\n      ({ user }) => user.id !== client.userID\r\n    );\r\n\r\n    if (!members.length || members.length === 1) {\r\n      return members[0]?.user.name || members[0]?.user.id || \"Johnny Blaze\";\r\n    }\r\n\r\n    return \"the group\";\r\n  };\r\n\r\n  const messageInput = useMessageInputContext();\r\n\r\n  const onChange = useCallback(\r\n    (e) => {\r\n      const { value } = e.target;\r\n      const deletePressed =\r\n        e.nativeEvent?.inputType === \"deleteContentBackward\";\r\n\r\n      if (messageInput.text.length === 1 && deletePressed) {\r\n        setGiphyState(false);\r\n      }\r\n\r\n      if (\r\n        !giphyState &&\r\n        messageInput.text.startsWith(\"/giphy\") &&\r\n        !messageInput.numberOfUploads\r\n      ) {\r\n        e.target.value = value.replace(\"/giphy\", \"\");\r\n        setGiphyState(true);\r\n      }\r\n\r\n      if (boldState) {\r\n        if (deletePressed) {\r\n          e.target.value = `${value.slice(0, value.length - 2)}**`;\r\n        } else {\r\n          e.target.value = `**${value.replace(/\\**/g, \"\")}**`;\r\n        }\r\n      } else if (codeState) {\r\n        if (deletePressed) {\r\n          e.target.value = `${value.slice(0, value.length - 1)}\\``;\r\n        } else {\r\n          e.target.value = `\\`${value.replace(/`/g, \"\")}\\``;\r\n        }\r\n      } else if (italicState) {\r\n        if (deletePressed) {\r\n          e.target.value = `${value.slice(0, value.length - 1)}*`;\r\n        } else {\r\n          e.target.value = `*${value.replace(/\\*/g, \"\")}*`;\r\n        }\r\n      } else if (strikeThroughState) {\r\n        if (deletePressed) {\r\n          e.target.value = `${value.slice(0, value.length - 2)}~~`;\r\n        } else {\r\n          e.target.value = `~~${value.replace(/~~/g, \"\")}~~`;\r\n        }\r\n      }\r\n\r\n      messageInput.handleChange(e);\r\n    },\r\n    [\r\n      boldState,\r\n      codeState,\r\n      giphyState,\r\n      italicState,\r\n      messageInput,\r\n      setGiphyState,\r\n      strikeThroughState,\r\n    ]\r\n  );\r\n\r\n  const GiphyIcon = () => (\r\n    <div className=\"giphy-icon__wrapper\">\r\n      <LightningBolt />\r\n      <p className=\"giphy-icon__text\">GIPHY</p>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={`team-message-input__wrapper ${\r\n        (!!thread || pinsOpen) && \"thread-open\"\r\n      }`}\r\n    >\r\n      <ImageDropzone\r\n        accept={acceptedFiles}\r\n        handleFiles={messageInput.uploadNewFiles}\r\n        multiple={multipleUploads}\r\n        disabled={\r\n          (maxNumberOfFiles !== undefined &&\r\n            messageInput.numberOfUploads >= maxNumberOfFiles) ||\r\n          giphyState\r\n        }\r\n      >\r\n        <div className=\"team-message-input__input\">\r\n          <div className=\"team-message-input__top\">\r\n            {giphyState && !messageInput.numberOfUploads && <GiphyIcon />}\r\n            <UploadsPreview />\r\n            <ChatAutoComplete\r\n              onChange={onChange}\r\n              placeholder={`Message ${getPlaceholder()}`}\r\n            />\r\n            <div\r\n              className=\"team-message-input__button\"\r\n              role=\"button\"\r\n              aria-roledescription=\"button\"\r\n              onClick={messageInput.handleSubmit}\r\n            >\r\n              <SendButton />\r\n            </div>\r\n          </div>\r\n          <div className=\"team-message-input__bottom\">\r\n            <div className=\"team-message-input__icons\">\r\n              <SmileyFace openEmojiPicker={messageInput.openEmojiPicker} />\r\n              {/* <LightningBolt {...{ giphyState, onCommandClick }} /> */}\r\n              <div className=\"icon-divider\"></div>\r\n              <BoldIcon {...{ boldState, resetIconState, setBoldState }} />\r\n              <ItalicsIcon\r\n                {...{ italicState, resetIconState, setItalicState }}\r\n              />\r\n              <StrikeThroughIcon\r\n                {...{\r\n                  resetIconState,\r\n                  strikeThroughState,\r\n                  setStrikeThroughState,\r\n                }}\r\n              />\r\n              <CodeSnippet {...{ codeState, resetIconState, setCodeState }} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ImageDropzone>\r\n      <TeamTypingIndicator type=\"input\" />\r\n      <EmojiPicker />\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}